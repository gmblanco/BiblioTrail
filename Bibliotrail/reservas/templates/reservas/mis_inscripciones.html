{% extends "BibliotrailApp/base.html" %}
{% load static %}

{% block title %}
<title>Mis Inscripciones</title>
{% endblock %}

{% block content %}
<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold" style="color: #4a77d4;">
      <i class="bi bi-calendar-event-fill me-2" style="color: #4a77d4;"></i>Mis inscripciones a eventos
    </h2>
  </div>


  {% if inscripciones %}
    <div class="row gy-4">
      {% for inscripcion in inscripciones %}
        <div class="col-12 col-md-6 col-xl-4">
          <div class="card shadow-sm h-100 border-0">
            <div class="card-body d-flex flex-column justify-content-between">
              <h5 class="card-title fw-semibold text-dark mb-2">
                <i class="bi me-1 text-success"></i>{{ inscripcion.titulo_evento }}
              </h5>
              <p class="text-muted small mb-1">
                <i class="bi bi-geo-alt-fill text-secondary"></i> {{ inscripcion.biblioteca_origen|capfirst }}
              </p>
              <p class="text-muted small mb-3">
                <i class="bi bi-clock-history"></i> Inscrito el: {{ inscripcion.fecha_inscripcion|date:"j \\d\\e F Y - H:i" }}
              </p>

              <form method="post" action="{% url 'cancelar_inscripcion' inscripcion.id %}" onsubmit="return confirm('¿Seguro que deseas cancelar esta inscripción?')">
                {% csrf_token %}
                <button type="submit" class="btn btn-outline-danger btn-sm w-100">
                  <i class="bi bi-x-circle"></i> Cancelar inscripción
                </button>
              </form>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info text-center mt-5 p-4 shadow-sm" role="alert">
      <i class="bi bi-info-circle-fill me-2"></i> Todavía no estás inscrito en ningún evento.
    </div>
  {% endif %}

  <!-- Texto explicativo debajo -->
  <div class="mt-5">
    <h5 class="fw-semibold">Información importante</h5>
    <p class="text-muted">
      Aquí puedes consultar todos los eventos a los que estás inscrito. Si ya no puedes asistir a alguno, por favor cancela tu inscripción cuanto antes para que otra persona pueda ocupar tu lugar.
    </p>

    <div class="alert alert-warning shadow-sm" role="alert">
      <i class="bi bi-exclamation-triangle-fill me-2"></i>
      Recuerda que inscribirte a un evento implica un compromiso de asistencia. Si surge algún imprevisto, cancela con antelación desde esta sección.
    </div>
  </div>
</div>
{% endblock %}
